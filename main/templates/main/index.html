{% extends 'main/base.html' %}
{% block title %}Home | Philip Titus{% endblock %}
{% block description %}Philip Titus - Professional Software & Machine Learning Engineer. Custom web development, mobile apps, AI/ML solutions, and cybersecurity services. Available for hire for your next project.{% endblock %}
{% block keywords %}Philip Titus, software engineer, machine learning developer, web development services, mobile app development, AI solutions, Django, React Native, Python, hire developer, freelance programmer, custom software{% endblock %}

{% load static %}

<!-- ================================
Start SEO blocks

================================= -->

<!-- ================================
END SEO blocks
================================= -->

<!-- ================================
Start CSS blocks
================================= -->
{% block extend_header %}

<link href="{% static 'css/index3.css' %}" rel="stylesheet">


{% endblock %}
<!-- ================================
END CSS blocks
================================= -->

<!-- ================================
Start script blocks
================================= -->
{% block extend_footer %}
<!-- <script src="{% static 'js/carousel.js' %}"></script> -->

<script type="text/javascript">
  // Carousel Configuration
const defaultConfig = {
    slidesPerView: 1,
    spaceBetween: 30,
    loop: true,
    autoplay: {
        delay: 60000, // 10000 milliseconds = 10 seconds
        disableOnInteraction: false,
    },
    pagination: {
        el: '.swiper-pagination',
        clickable: true,
    },
    navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
    },
    breakpoints: {
        640: {
            slidesPerView: 1,
        },
        768: {
            slidesPerView: 2,
        },
        1024: {
            slidesPerView: 3,
        },
    },
    on: {
        init: function() {
            console.log('Swiper initialized');
        },
        error: function(error) {
            console.error('Swiper error:', error);
        }
    }
};

// Initialize a single carousel
function initCarousel(selector, customConfig = {}) {
    try {
        const element = document.querySelector(selector);
        if (!element) {
            console.warn(`Carousel element not found: ${selector}`);
            return null;
        }

        const config = { ...defaultConfig, ...customConfig };
        const swiper = new Swiper(selector, config);
        
        // Add error handling
        swiper.on('error', (error) => {
            console.error(`Error in carousel ${selector}:`, error);
        });

        return swiper;
    } catch (error) {
        console.error(`Failed to initialize carousel ${selector}:`, error);
        return null;
    }
}

// Initialize all carousels
function initAllCarousels() {
    const carousels = {
        projects: initCarousel('.projectsSlider'),
        certificates: initCarousel('.certificatesSlider'),
        jobs: initCarousel('.jobsSlider'),
        awards: initCarousel('.awardsSlider'),
        blogs: initCarousel('.blogsSlider')
    };

    // Log initialization status
    Object.entries(carousels).forEach(([name, swiper]) => {
        if (swiper) {
            console.log(`${name} carousel initialized successfully`);
        } else {
            console.warn(`${name} carousel failed to initialize`);
        }
    });

    return carousels;
}

// Handle video interactions
function setupVideoInteractions() {
    const videoContainers = document.querySelectorAll('.video-container');
    
    videoContainers.forEach(container => {
        const expandButton = container.querySelector('.expand-video');
        const iframe = container.querySelector('iframe');
        
        // Handle expand/collapse
        expandButton.addEventListener('click', () => {
            container.classList.toggle('expanded');
            // Pause carousel when video is expanded
            const swiper = container.closest('.swiper').swiper;
            if (container.classList.contains('expanded')) {
                swiper.autoplay.stop();
            } else {
                swiper.autoplay.start();
            }
        });

        // Handle mouse enter/leave
        container.addEventListener('mouseenter', () => {
            const swiper = container.closest('.swiper').swiper;
            swiper.autoplay.stop();
        });

        container.addEventListener('mouseleave', () => {
            if (!container.classList.contains('expanded')) {
                const swiper = container.closest('.swiper').swiper;
                swiper.autoplay.start();
            }
        });
    });
}

// Wait for DOM and Swiper to be ready
function waitForSwiper() {
    return new Promise((resolve) => {
        if (window.Swiper) {
            resolve();
        } else {
            const checkSwiper = setInterval(() => {
                if (window.Swiper) {
                    clearInterval(checkSwiper);
                    resolve();
                }
            }, 100);
        }
    });
}

// Initialize when everything is ready
document.addEventListener('DOMContentLoaded', async () => {
    try {
        await waitForSwiper();
        window.portfolioCarousels = initAllCarousels();
        setupVideoInteractions();
        initModal();
        initChatbotIcons();
    } catch (error) {
        console.error('Failed to initialize carousels:', error);
    }
});

// Chatbot Info Icons Functionality
function initChatbotIcons() {
    const chatbotIcons = document.querySelectorAll('.chatbot-info-icon');
    
    chatbotIcons.forEach(icon => {
        icon.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            const type = icon.dataset.type;
            const title = icon.dataset.title;
            let message = '';
            
            switch(type) {
                case 'project':
                    message = `Tell me about Philip's project "${title}". What technologies were used and what problem does it solve?`;
                    break;
                case 'certificate':
                    const certCategory = icon.dataset.category;
                    message = `Tell me about Philip's certification "${title}" in ${certCategory}. What skills does this certification demonstrate?`;
                    break;
                case 'job':
                    const company = icon.dataset.company;
                    const current = icon.dataset.current;
                    message = `Tell me about Philip's ${current === 'yes' ? 'current ' : ''}role as ${title} at ${company}. What are his key responsibilities?`;
                    break;
                case 'award':
                    const issuer = icon.dataset.issuer;
                    message = `Tell me about Philip's award "${title}" from ${issuer}. What did he achieve to earn this?`;
                    break;
                default:
                    message = `Tell me more about ${title}.`;
            }
            
            if (window.chatbot) {
                window.chatbot.open();
                setTimeout(() => {
                    const input = document.getElementById('chatbot-input');
                    if (input) {
                        input.value = message;
                        window.chatbot.sendMessage();
                    }
                }, 500);
            }
        });
    });
} 

// Parallax effect for floating elements
document.addEventListener('mousemove', (e) => {
    const floatingElements = document.querySelectorAll('.floating-element');
    const x = e.clientX / window.innerWidth;
    const y = e.clientY / window.innerHeight;
    
    floatingElements.forEach((element, index) => {
        const speed = (index + 1) * 0.5;
        const xPos = (x - 0.5) * speed * 20;
        const yPos = (y - 0.5) * speed * 20;
        element.style.transform = `translate(${xPos}px, ${yPos}px)`;
    });
});

  (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "mwgsql2uuh");

// Modal functionality - Only for Certificates section
function initModal() {
    const modal = document.getElementById('cardModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    const modalImage = document.getElementById('modalImage');
    const closeModal = document.getElementById('closeModal');
    const modalTriggers = document.querySelectorAll('.modal-trigger');

    // Helper function to clean text
    function cleanText(text) {
        return text ? text.trim().replace(/\s+/g, ' ') : '';
    }

    // Helper function to extract text content safely
    function getTextContent(element, selector) {
        const el = element.querySelector(selector);
        return el ? cleanText(el.textContent) : '';
    }

    // Open modal function
    function openModal(trigger) {
        // Clear previous content
        modalContent.innerHTML = '';
        modalImage.innerHTML = '';
        
        // Extract title
        const title = getTextContent(trigger, '.portfolio-title') || getTextContent(trigger, '.portfolio-title a') || 'Details';
        modalTitle.textContent = title;
        
        // Extract description
        const description = getTextContent(trigger, 'p');
        
        // Extract and display image
        const imageElement = trigger.querySelector('img.portfolio-image') || trigger.querySelector('.portfolio-image');
        if (imageElement && imageElement.src && !imageElement.src.includes('placeholder')) {
            modalImage.innerHTML = `<img src="${imageElement.src}" alt="${title}" class="modal-image">`;
        }
        
        // Build content for certificates only
        let contentHTML = '';
        
        const allDateElements = trigger.querySelectorAll('.portfolio-date');
        const credentialLink = trigger.querySelector('a[href*="http"]');
        
        let category = '';
        let status = '';
        
        allDateElements.forEach(el => {
            const text = cleanText(el.textContent);
            if (text.startsWith('Status:')) {
                status = text.replace('Status:', '').trim();
            } else if (text && !text.startsWith('Status:')) {
                category = text;
            }
        });
        
        contentHTML = `
            ${description ? `
            <div class="modal-detail">
                <h4>Description</h4>
                <p>${description}</p>
            </div>` : ''}
            ${category ? `
            <div class="modal-detail">
                <h4>Category</h4>
                <p>${category}</p>
            </div>` : ''}
            ${status ? `
            <div class="modal-detail">
                <h4>Status</h4>
                <p class="status-${status.toLowerCase()}">${status === 'learning' ? 'Currently Learning' : 'Completed'}</p>
            </div>` : ''}
            ${credentialLink ? `
            <div class="modal-detail">
                <a href="${credentialLink.href}" target="_blank" class="btn btn-primary">ðŸ“œ View Credential</a>
            </div>` : ''}
        `;
        
        // Fallback content
        if (!contentHTML.trim()) {
            contentHTML = `
                <div class="modal-detail">
                    <h4>Description</h4>
                    <p>${description || 'No additional details available.'}</p>
                </div>
            `;
        }
        
        modalContent.innerHTML = contentHTML;
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }
    
    // Close modal function
    function closeModalFunc() {
        modal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }
    
    // Add click listeners to modal triggers (only certificates)
    modalTriggers.forEach(trigger => {
        trigger.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            openModal(trigger);
        });
    });
    
    // Close modal listeners
    closeModal.addEventListener('click', closeModalFunc);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeModalFunc();
        }
    });
    
    // Close on escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModalFunc();
        }
    });
}
</script>
{% endblock %}
<!-- ================================
END script blocks
================================= -->

<!-- ================================
Start Content
================================= -->
{% block content %}
<!-- Floating Background Elements -->
<div class="floating-elements">
  <div class="floating-element floating-circle"></div>
  <div class="floating-element floating-square"></div>
  <div class="floating-element floating-triangle"></div>
  <div class="floating-element floating-hexagon"></div>
</div>

<!-- Modal for Card Details (Certificates Only) -->
<div id="cardModal" class="modal-overlay">
  <div class="modal-container">
    <div class="modal-header">
      <h3 id="modalTitle" class="modal-title"></h3>
      <button id="closeModal" class="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <div id="modalImage" class="modal-image-container"></div>
      <div id="modalContent" class="modal-content"></div>
    </div>
  </div>
</div>

<!-- Hero Section -->
<section class="hero">
  <div class="container">
    <div class="glass-container hero-glass">
      <div class="row align-items-center">
        <div class="col-lg-6 hero-content">
          <h1 class="hero-title">Hi, I'm Philip</h1>
          <div class="hero-subtitle">Software & Machine Learning Engineer</div>
          <div class="hero-buttons">
            <a href="https://github.com/philiptitus" class="btn btn-outline" target="_blank">
              <i class="fab fa-github"></i> My Github
            </a>

            <a href="{% url 'main:contact' %}" class="btn btn-outline">
              <i class="fas fa-envelope"></i> ContactðŸ“ž
            </a>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


<!-- Other Projects Section -->
<section class="section section-projects">
  <div class="container">
    <div class="glass-container">
      <h2 class="section-title">Key Projects</h2>
      <div class="swiper projectsSlider">
        <div class="swiper-wrapper">
          {% for p in portfolio %}
            {% if p.is_active and p.featured %}
              <div class="swiper-slide">
                <a href="{% url 'main:portfolio' slug=p.slug %}" class="portfolio-card">
                  <div class="card-content">
                    <img src="{{p.image_url}}" alt="{{p.name}}" class="portfolio-image">
                    <div class="portfolio-content">
                      <h3 class="portfolio-title">{{p.name}}</h3>
                      <p>{{p.description}}</p>
                    </div>
                    <div class="chatbot-info-icon" data-type="project" data-title="{{p.name}}" data-description="{{p.description}}" data-category="{{p.category}}" title="Ask chatbot about this project">
    <img src="/static/images/lightning.svg" alt="Chat" style="width: 1.5em; height: 1.5em; vertical-align: middle;">
</div>
                  </div>
                </a>
              </div>
            {% endif %}
          {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>
    </div>
  </div>
</section>




<!-- Work Experience Section -->
<section class="section section-experience">
  <div class="container">
    <div class="glass-container">
      <h2 class="section-title">Work Experience</h2>
      <div class="swiper jobsSlider">
        <div class="swiper-wrapper">
          {% for j in jobs %}
            <div class="swiper-slide">
              <div class="portfolio-card">
                <div class="portfolio-content">
                  <h3 class="portfolio-title">{{j.job_title}}</h3>
                  <div class="portfolio-date">From: {{j.start_date}}</div>
                  <div class="portfolio-date">Company: {{j.company_name|title}}</div>
                  <!-- <p>{{j.description}}</p> -->
                  <div class="portfolio-date">Location: {{ j.location }}</div>
                  {% if j.is_current %}
                    <div class="portfolio-date" style="color: var(--secondary);">My Current Role</div>
                  {% endif %}
                  <div class="chatbot-info-icon" data-type="job" data-title="{{j.job_title}}" data-company="{{j.company_name}}" data-location="{{j.location}}" data-current="{% if j.is_current %}yes{% else %}no{% endif %}" title="Ask chatbot about this job">
    <img src="/static/images/lightning.svg" alt="Chat" style="width: 1.5em; height: 1.5em; vertical-align: middle;">
</div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>
    </div>
  </div>
</section>


<!-- Certificates Section -->
<section class="section section-certificates">
  <div class="container">
    <div class="glass-container">
      <h2 class="section-title">Certifications</h2>
      <div class="swiper certificatesSlider">
        <div class="swiper-wrapper">
          {% for c in certificates %}
            {% if c.is_active %}
              <div class="swiper-slide">
                <div class="portfolio-card">
                  <div class="portfolio-content">
                    <h3 class="portfolio-title">
                      <a>{{c.title}}</a>
                    </h3>
                    {% if c.image_url %}
                      <img src="{{ c.image_url }}" alt="{{ c.title }}" class="portfolio-image" style="margin-bottom: 1rem; border-radius: 12px; max-height: 180px; object-fit: contain; background: #fff; box-shadow: var(--shadow);" />
                    {% else %}
                      <p>{{c.description}}</p>
                    {% endif %}
                    <div class="portfolio-date">{{ c.category }}</div>
                    {% if c.url %}
                      <div class="portfolio-date">
                        <a href="{{ c.url }}" target="_blank" style="color: greenyellow; text-decoration: none; font-size: 0.9rem;">
                          ðŸ“œ View Credential
                        </a>
                      </div>
                    {% endif %}
                    {% if c.is_ongoing %}
                      <div class="portfolio-date" style="color: var(--secondary);">Status: learning</div>
                    {% else %}
                      <div class="portfolio-date" style="color: var(--secondary);">Status: complete</div>
                    {% endif %}
                    <div class="chatbot-info-icon" data-type="certificate" data-title="{{c.title}}" data-description="{{c.description}}" data-category="{{c.category}}" data-status="{% if c.is_ongoing %}learning{% else %}complete{% endif %}" title="Ask chatbot about this certificate">
    <img src="/static/images/lightning.svg" alt="Chat" style="width: 1.5em; height: 1.5em; vertical-align: middle;">
</div>
                  </div>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>
    </div>
  </div>
</section>



<!-- Awards Section -->
<section class="section section-awards">
  <div class="container">
    <div class="glass-container">
      <h2 class="section-title">Awards</h2>
      <div class="swiper awardsSlider">
        <div class="swiper-wrapper">
          {% for c in awards %}
            {% if c.is_active %}
              <div class="swiper-slide">
                <div class="portfolio-card">
                  <img src="{{ c.image_url }}" alt="{{ c.title }}" class="portfolio-image">
                  <div class="portfolio-content">
                    <h3 class="portfolio-title">{{c.title}}</h3>
                    <div class="portfolio-date">Issued by: {{ c.issued_by }}</div>
                    <div class="chatbot-info-icon" data-type="award" data-title="{{c.title}}" data-issuer="{{c.issued_by}}" data-description="{{c.description}}" title="Ask chatbot about this award">
    <img src="/static/images/lightning.svg" alt="Chat" style="width: 1.5em; height: 1.5em; vertical-align: middle;">
</div>
                  </div>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>
    </div>
  </div>
</section>

{% endblock %}
<!-- ================================
End Content
================================= -->